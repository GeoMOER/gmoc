<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Creating Publication Quality Graphics in R</title>
  <meta name="description" content="Creating Publication Quality Graphics in R">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Creating Publication Quality Graphics in R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="marburg-open-courseware/publication-quality-graphics" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Creating Publication Quality Graphics in R" />
  
  
  

<meta name="author" content="Tim Appelhans and Florian Detsch">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="sorting-data.html">
<link rel="next" href="a-brief-note-on-using-colors.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Publication Quality Graphics in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data-handling.html"><a href="data-handling.html"><i class="fa fa-check"></i><b>1</b> Data Handling</a><ul>
<li class="chapter" data-level="1.1" data-path="subset.html"><a href="subset.html"><i class="fa fa-check"></i><b>1.1</b> Subsetting Data</a></li>
<li class="chapter" data-level="1.2" data-path="aggregating-data.html"><a href="aggregating-data.html"><i class="fa fa-check"></i><b>1.2</b> Aggregating Data</a></li>
<li class="chapter" data-level="1.3" data-path="sorting-data.html"><a href="sorting-data.html"><i class="fa fa-check"></i><b>1.3</b> Sorting Data</a></li>
<li class="chapter" data-level="1.4" data-path="merging-data.html"><a href="merging-data.html"><i class="fa fa-check"></i><b>1.4</b> Merging Data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="a-brief-note-on-using-colors.html"><a href="a-brief-note-on-using-colors.html"><i class="fa fa-check"></i><b>2</b> A Brief Note on using Colors</a></li>
<li class="chapter" data-level="3" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>3</b> Data Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="scatter-plots-lattice.html"><a href="scatter-plots-lattice.html"><i class="fa fa-check"></i><b>3.1</b> Scatter plots (lattice)</a></li>
<li class="chapter" data-level="3.2" data-path="scatter-plots-ggplot2.html"><a href="scatter-plots-ggplot2.html"><i class="fa fa-check"></i><b>3.2</b> Scatter plots (ggplot2)</a></li>
<li class="chapter" data-level="3.3" data-path="box-and-whisker-plots-lattice.html"><a href="box-and-whisker-plots-lattice.html"><i class="fa fa-check"></i><b>3.3</b> Box-and-Whisker Plots (lattice)</a></li>
<li class="chapter" data-level="3.4" data-path="box-and-whisker-plots-ggplot2.html"><a href="box-and-whisker-plots-ggplot2.html"><i class="fa fa-check"></i><b>3.4</b> Box-and-Whisker Plots (ggplot2)</a></li>
<li class="chapter" data-level="3.5" data-path="histograms-and-density-plots-lattice.html"><a href="histograms-and-density-plots-lattice.html"><i class="fa fa-check"></i><b>3.5</b> Histograms and Density Plots (lattice)</a></li>
<li class="chapter" data-level="3.6" data-path="histograms-and-density-plots-ggplot2.html"><a href="histograms-and-density-plots-ggplot2.html"><i class="fa fa-check"></i><b>3.6</b> Histograms and Density Plots (ggplot2)</a></li>
<li class="chapter" data-level="3.7" data-path="plotting-error-bars-lattice.html"><a href="plotting-error-bars-lattice.html"><i class="fa fa-check"></i><b>3.7</b> Plotting Error Bars (lattice)</a></li>
<li class="chapter" data-level="3.8" data-path="gg-err.html"><a href="gg-err.html"><i class="fa fa-check"></i><b>3.8</b> Plotting Error Bars (ggplot2)</a></li>
<li class="chapter" data-level="3.9" data-path="plotting-error-bars-base-graphics.html"><a href="plotting-error-bars-base-graphics.html"><i class="fa fa-check"></i><b>3.9</b> Plotting Error Bars (base graphics)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manipulating-plots-with-grid.html"><a href="manipulating-plots-with-grid.html"><i class="fa fa-check"></i><b>4</b> Manipulating Plots with grid</a><ul>
<li class="chapter" data-level="4.1" data-path="multiple-plots-per-page.html"><a href="multiple-plots-per-page.html"><i class="fa fa-check"></i><b>4.1</b> Multiple Plots per Page</a></li>
<li class="chapter" data-level="4.2" data-path="manipulating-existing-plots.html"><a href="manipulating-existing-plots.html"><i class="fa fa-check"></i><b>4.2</b> Manipulating Existing Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="saving.html"><a href="saving.html"><i class="fa fa-check"></i><b>5</b> Saving your Visualizations</a><ul>
<li class="chapter" data-level="5.1" data-path="tagged-image-file-format.html"><a href="tagged-image-file-format.html"><i class="fa fa-check"></i><b>5.1</b> Tagged Image File Format</a></li>
<li class="chapter" data-level="5.2" data-path="portable-network-graphics.html"><a href="portable-network-graphics.html"><i class="fa fa-check"></i><b>5.2</b> Portable Network Graphics</a></li>
<li class="chapter" data-level="5.3" data-path="encapsulated-postscript.html"><a href="encapsulated-postscript.html"><i class="fa fa-check"></i><b>5.3</b> Encapsulated Postscript</a></li>
<li class="chapter" data-level="5.4" data-path="portable-document-format.html"><a href="portable-document-format.html"><i class="fa fa-check"></i><b>5.4</b> Portable Document Format</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-remarks.html"><a href="final-remarks.html"><i class="fa fa-check"></i><b>6</b> Final remarks</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with <b>bookdown</b></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Creating Publication Quality Graphics in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="merging-data" class="section level2">
<h2><span class="header-section-number">1.4</span> Merging Data</h2>
<p>Often enough we end up with multiple data sets on our hard drive that contain useful data for the same analysis. In this case we might want to amalgamate our data sets so that we have all the data in one set.<br />
R provides a function called <code>merge()</code> that does just that:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ave_n_cut_color_price &lt;-<span class="st"> </span><span class="kw">merge</span>(ave_n_cut_color, ave_price_cut, 
                               <span class="dt">by.x =</span> <span class="st">&quot;cut&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;Group.1&quot;</span>)
ave_n_cut_color_price</code></pre></div>
<pre><code>##          cut color    n        x
## 1       Fair     J  119 4358.758
## 2       Fair     D  163 4358.758
## 3       Fair     I  175 4358.758
## 4       Fair     E  224 4358.758
## 5       Fair     H  303 4358.758
## 6       Fair     F  312 4358.758
## 7       Fair     G  314 4358.758
## 8       Good     J  307 3928.864
## 9       Good     I  522 3928.864
## 10      Good     D  662 3928.864
## 11      Good     H  702 3928.864
## 12      Good     G  871 3928.864
## 13      Good     F  909 3928.864
## 14      Good     E  933 3928.864
## 15     Ideal     J  896 3457.542
## 16     Ideal     I 2093 3457.542
## 17     Ideal     D 2834 3457.542
## 18     Ideal     H 3115 3457.542
## 19     Ideal     F 3826 3457.542
## 20     Ideal     E 3903 3457.542
## 21     Ideal     G 4884 3457.542
## 22   Premium     J  808 4584.258
## 23   Premium     I 1428 4584.258
## 24   Premium     D 1603 4584.258
## 25   Premium     F 2331 4584.258
## 26   Premium     E 2337 4584.258
## 27   Premium     H 2360 4584.258
## 28   Premium     G 2924 4584.258
## 29 Very Good     J  678 3981.760
## 30 Very Good     I 1204 3981.760
## 31 Very Good     D 1513 3981.760
## 32 Very Good     H 1824 3981.760
## 33 Very Good     F 2164 3981.760
## 34 Very Good     G 2299 3981.760
## 35 Very Good     E 2400 3981.760</code></pre>
<p>As the variable names of our two data sets differ, we need to specifically provide the names for each by which the merging should be done (<code>by.x</code> and <code>by.y</code>). The default of <code>merge()</code> tries to find variable names which are identical.</p>
<p>Note, in order to merge more than two data frames at a time, we need to call a powerful higher-order function called <code>Reduce()</code>. This is one mighty function for doing all sorts of things iteratively.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(ave_price_cut) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;cut&quot;</span>, <span class="st">&quot;price&quot;</span>)

<span class="kw">set.seed</span>(<span class="dv">12</span>)

df3 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">cut =</span> ave_price_cut<span class="op">$</span>cut,
                  <span class="dt">var1 =</span> <span class="kw">rnorm</span>(<span class="kw">nrow</span>(ave_price_cut), <span class="dv">10</span>, <span class="dv">2</span>),
                  <span class="dt">var2 =</span> <span class="kw">rnorm</span>(<span class="kw">nrow</span>(ave_price_cut), <span class="dv">100</span>, <span class="dv">20</span>))

ave_n_cut_color_price &lt;-<span class="st"> </span><span class="kw">Reduce</span>(<span class="cf">function</span>(...) <span class="kw">merge</span>(..., <span class="dt">all=</span>T), 
                                <span class="kw">list</span>(ave_n_cut_color, 
                                     ave_price_cut,
                                     df3))
ave_n_cut_color_price</code></pre></div>
<pre><code>##          cut color    n    price      var1      var2
## 1       Fair     J  119 4358.758  7.038865  94.55408
## 2       Fair     D  163 4358.758  7.038865  94.55408
## 3       Fair     I  175 4358.758  7.038865  94.55408
## 4       Fair     E  224 4358.758  7.038865  94.55408
## 5       Fair     H  303 4358.758  7.038865  94.55408
## 6       Fair     F  312 4358.758  7.038865  94.55408
## 7       Fair     G  314 4358.758  7.038865  94.55408
## 8       Good     J  307 3928.864 13.154339  93.69303
## 9       Good     I  522 3928.864 13.154339  93.69303
## 10      Good     D  662 3928.864 13.154339  93.69303
## 11      Good     H  702 3928.864 13.154339  93.69303
## 12      Good     G  871 3928.864 13.154339  93.69303
## 13      Good     F  909 3928.864 13.154339  93.69303
## 14      Good     E  933 3928.864 13.154339  93.69303
## 15     Ideal     J  896 3457.542  6.004716 108.56030
## 16     Ideal     I 2093 3457.542  6.004716 108.56030
## 17     Ideal     D 2834 3457.542  6.004716 108.56030
## 18     Ideal     H 3115 3457.542  6.004716 108.56030
## 19     Ideal     F 3826 3457.542  6.004716 108.56030
## 20     Ideal     E 3903 3457.542  6.004716 108.56030
## 21     Ideal     G 4884 3457.542  6.004716 108.56030
## 22   Premium     J  808 4584.258  8.159990  97.87072
## 23   Premium     I 1428 4584.258  8.159990  97.87072
## 24   Premium     D 1603 4584.258  8.159990  97.87072
## 25   Premium     F 2331 4584.258  8.159990  97.87072
## 26   Premium     E 2337 4584.258  8.159990  97.87072
## 27   Premium     H 2360 4584.258  8.159990  97.87072
## 28   Premium     G 2924 4584.258  8.159990  97.87072
## 29 Very Good     J  678 3981.760  8.086511  87.43490
## 30 Very Good     I 1204 3981.760  8.086511  87.43490
## 31 Very Good     D 1513 3981.760  8.086511  87.43490
## 32 Very Good     H 1824 3981.760  8.086511  87.43490
## 33 Very Good     F 2164 3981.760  8.086511  87.43490
## 34 Very Good     G 2299 3981.760  8.086511  87.43490
## 35 Very Good     E 2400 3981.760  8.086511  87.43490</code></pre>
<p>Obviously, setting proper names would be the next step now…</p>
<p>Okay, so now we have a few tools at hand to manipulate our data in a way that we should be able to produce some meaningful graphs which tell the story that we want to be heard, or better, seen…</p>
<p>So, let’s start plotting stuff!</p>

</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="sorting-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="a-brief-note-on-using-colors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
